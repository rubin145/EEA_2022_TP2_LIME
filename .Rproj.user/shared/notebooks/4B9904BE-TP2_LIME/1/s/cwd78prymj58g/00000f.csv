"0","to_df <- function(explanation){"
"0","  explanation_df <- data.frame(model_type = explanation$model_type,"
"0","                              case = explanation$case,"
"0","                              label = explanation$label,"
"0","                              label_prob = explanation$label_prob,"
"0","                              model_r2 = explanation$model_r2,"
"0","                              model_intercept = explanation$model_intercept,"
"0","                              model_prediction = explanation$model_prediction,"
"0","                              feature = explanation$feature,"
"0","                              feature_value = NA,"
"0","                              feature_weight = explanation$feature_weight,"
"0","                              feature_desc = explanation$feature_desc,"
"0","                              data = NA,"
"0","                              prediction = NA,"
"0","                              stringsAsFactors = FALSE)"
"0",""
"0","  ## this will coerce superpixel_list and bitmap_list to list, but still works for plotting"
"0","  for (i in 1:nrow(explanation_df)){"
"0","    explanation_df$feature_value[i] <- explanation$feature_value[i]"
"0","    explanation_df$data[i] <- explanation$data[i]"
"0","    explanation_df$prediction[i] <- explanation$prediction[i]"
"0","  }"
"0","  return(explanation_df)"
"0","}"
"0",""
"0","image_prep <- function(x) {"
"0","  arrays <- lapply(x, function(path) {"
"0","    img <- image_load(path, target_size = c(224,224))"
"0","    x <- image_to_array(img)"
"0","    x <- array_reshape(x, c(1, dim(x)))"
"0","    x <- imagenet_preprocess_input(x)"
"0","  })"
"0","  do.call(abind::abind, c(arrays, list(along = 1)))"
"0","}"
